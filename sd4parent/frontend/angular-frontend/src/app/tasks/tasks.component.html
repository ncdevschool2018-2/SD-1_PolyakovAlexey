<!-- Page content -->
<main class="container wrapper">
  <div class="jumbotron border bg-white clearfix jumbotron-size">
    <!-- Button and filter -->
    <div class="row justify-content-between mb-4">
      <div class="float-left">
        <button class="btn btn-outline-primary ml-3" type="button" data-toggle="modal" data-target="#newTask" (click)="_openModal(template)">
          New Task
        </button>
        <button class="btn btn-outline-primary ml-3" type="button" (click)="_updateTasks()">
          Update
        </button>
      </div>
      <div class="mr-3"><input type="text" class="form-control filter" placeholder="Filter tasks..."></div>
    </div>

    <!-- Table of tasks  -->
    <div class="table-responsive">
      <table class="table table-hover">
        <thead class="thead-light">
        <tr>
          <th scope="col" class="border-right">Project Code</th>
          <th scope="col">Priority</th>
          <th scope="col">Estimation</th>
          <th scope="col">Assignee</th>
          <th scope="col">Description</th>
          <th scope="col">Edit Action</th>
          <th scope="col" class="border-left">Delete Action</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let task of tasks">
          <th scope="row" class="border-right">{{task.projectCode}}</th>
          <td>{{task.priority}}</td>
          <td>{{task.estimation}}</td>
          <td>{{task.assignee}}</td>
          <td>{{task.summary}}</td>
          <td><button type="button" class="btn btn-outline-primary btn-sm btn-block" (click)="_openModal(template, task)">Edit </button>
          </td>
          <td class="border-left"><button type="button" class="btn btn-outline-danger btn-sm btn-block" (click)="_deleteTask(task.task_id)"> Delete </button>
          </td>
        </tr>

        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <ul class="pagination pagination-sm float-right mt-3">
      <li class="page-item">
        <a class="page-link" href="#" aria-label="Start">
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
      <li class="page-item">
        <a class="page-link" href="#" aria-label="Previous">
          <span aria-hidden="true">&#8249;</span>
        </a>
      </li>
      <li class="page-item"><a class="page-link" href="#">1</a></li>
      <li class="page-item"><a class="page-link" href="#">2</a></li>
      <li class="page-item"><a class="page-link" href="#">3</a></li>
      <li class="page-item">
        <a class="page-link" href="#" aria-label="Next">
          <span aria-hidden="true">&#8250;</span>
        </a>
      </li>
      <li class="page-item">
        <a class="page-link" href="#" aria-label="End">
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
    </ul>

    <ng-template #template>
      <!-- New task modal -->
      <div class="modal-header">
        <h5 class="modal-title">{{editMode ? "Edit": "Create"}} task</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="_closeModal()">
          <span>&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>Project Code:</label>
          <input type="text" class="form-control" name="projectCode" required
                 [(ngModel)]="editableTasks.projectCode" #projectCode="ngModel">
        </div>
        <div class="form-group">
          <label>Description:</label>
          <textarea class="form-control" name="summary" rows="3" [(ngModel)]="editableTasks.summary" #summary="ngModel"></textarea>
        </div>
        <div class="form-group">
          <label>Priority:</label>
          <input type="text" class="form-control" name="priority" required [(ngModel)]="editableTasks.priority" #priority="ngModel">
        </div>
        <div class="form-group">
          <label>Estimation:</label>
          <input type="text" class="form-control" name="estimation" [(ngModel)]="editableTasks.estimation" #estimation="ngModel">
        </div>
        <div class="form-group">
          <label>Assignee:</label>
          <input type="text" class="form-control" name="assignee" [(ngModel)]="editableTasks.assignee" #assignee="ngModel">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-primary" (click)="_addTask(projectCode, summary, priority, estimation, assignee)">{{editMode ? "Save": "Create"}}</button>
        <button type="button" class="btn btn-outline-danger" data-dismiss="modal" (click)="_closeModal()">Cancel</button>
      </div>
    </ng-template>

  </div>
</main>
